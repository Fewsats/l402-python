# utils


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Onchain

------------------------------------------------------------------------

<a
href="https://github.com/Fewsats/l402-python/blob/main/l402/utils.py#L13"
target="_blank" style="float:right; font-size:smaller">source</a>

### create_test_wallet

>  create_test_wallet (fund=True, chain='base-sepolia')

## Utilities to run FastAPI in a notebook

------------------------------------------------------------------------

<a
href="https://github.com/Fewsats/l402-python/blob/main/l402/utils.py#L45"
target="_blank" style="float:right; font-size:smaller">source</a>

### ServerManager

>  ServerManager (app, port=8000, host='0.0.0.0')

*Initialize self. See help(type(self)) for accurate signature.*

------------------------------------------------------------------------

<a
href="https://github.com/Fewsats/l402-python/blob/main/l402/utils.py#L38"
target="_blank" style="float:right; font-size:smaller">source</a>

### wait_port_free

>  wait_port_free (port, host='localhost', max_wait=3)

------------------------------------------------------------------------

<a
href="https://github.com/Fewsats/l402-python/blob/main/l402/utils.py#L30"
target="_blank" style="float:right; font-size:smaller">source</a>

### is_port_free

>  is_port_free (port, host='localhost')

``` python
# #| export

# def run_l402_server(PRClass, port=9000):
#     app = FastAPI()

#     server = ServerManager(app, port=port).start()

#     @app.get("/offers")
#     def offers():
#         offers_list = [{
#             "amount": 1,
#             "currency": 'USD',
#             "description": 'Purchase 1 credit for API access',
#             "offer_id": 'xxxx',
#             "payment_methods": ['onchain'],
#             "title": '1 Credit Package',
#             type='one-time'
#         )]

        
#         return JSONResponse(
#             content=offers_response.model_dump(),
#             status_code=402
#         )

#     @app.post("/payment_request")
#     async def create_payment_request(request: PRClass):
#         payment_request = ps.create_payment_request(**request.model_dump())
#         return JSONResponse(
#             content=payment_request,
#             status_code=200
#         )
```
